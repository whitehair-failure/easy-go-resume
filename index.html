<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>easy-go-resume</title>

  <!-- å¼•å…¥ Quill çš„æ ·å¼å’Œè„šæœ¬ -->
  <link href="./scss/quill.snow.css" rel="stylesheet">
  <link rel="stylesheet" href="scss/quill-customize-lineheight.css">
  <link rel="stylesheet" href="scss/style.min.css">
</head>

<body>
  <!-- æ“ä½œé¢æ¿ -->

  <div class="left-container">

    <div id="operation-panel">

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title1"></span>

        <div class="example-language">
          <!-- ä¸‹æ‹‰å•é€‰æ¡† -->
          <div class="dropdown roleDropdown">
            <div class="dropdown-button" id="roleDropdownButton" data-i18n="resumeExampleDropdown.title"></div>
            <div class="dropdown-options" id="roleDropdownOptions">
              <div class="roleDropdown-option" data-value="miku" data-i18n="resumeExampleDropdown.options.miku"></div>
              <div class="roleDropdown-option" data-value="momoka" data-i18n="resumeExampleDropdown.options.momoka">
              </div>
              <div class="roleDropdown-option" data-value="ShigureUi"
                data-i18n="resumeExampleDropdown.options.ShigureUi"></div>
              <div class="roleDropdown-option" data-value="GawrGura" data-i18n="resumeExampleDropdown.options.GawrGura">
              </div>
              <div class="roleDropdown-option" data-value="TadokoroKoji"
                data-i18n="resumeExampleDropdown.options.TadokoroKoji"></div>
              <div class="roleDropdown-option" data-value="griffith" data-i18n="resumeExampleDropdown.options.griffith">
              </div>
              <div class="roleDropdown-option" data-value="voldemort"
                data-i18n="resumeExampleDropdown.options.voldemort"></div>
              <!-- <div class="roleDropdown-option" data-value="style-5">æ ·å¼ 5</div> -->
            </div>
          </div>
          <!-- ä¸‹æ‹‰å•é€‰æ¡† -->
          <div class="dropdown langDropdown">
            <div class="dropdown-button" id="langDropdownButton" data-i18n="langDropdown.title"></div>
            <div class="dropdown-options" id="langDropdownOptions">
              <div class="langDropdown-option" data-value="en" data-i18n="langDropdown.options.en"></div>
              <div class="langDropdown-option" data-value="ja" data-i18n="langDropdown.options.ja"></div>
              <div class="langDropdown-option" data-value="zh" data-i18n="langDropdown.options.zh"></div>
            </div>
          </div>
        </div>

      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title4"></span>

        <div class="btn-box">
          <button id="upload-avatar" class="confirm" data-i18n="btns.uploadAvatar"></button>
          <button id="delete-avatar" class="cancel" data-i18n="btns.deleteAvatar"></button>
        </div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title2"></span>

        <div class="add-section-box">
          <input type="text" id="section-title" />
          <button id="add-section" class="confirm" data-i18n="btns.add"></button>
        </div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title3"></span>

        <div class="h2-style-box">
          <!-- ä¸‹æ‹‰å•é€‰æ¡† -->
          <div class="dropdown">
            <div class="dropdown-button" id="dropdownButton" data-i18n="H2Dropdown.options.style"></div>
            <div class="dropdown-options" id="dropdownOptions">
              <div class="dropdown-option" data-value="" data-i18n="H2Dropdown.options.style"></div>
              <div class="dropdown-option" data-value="style-1" data-i18n="H2Dropdown.options.style1"></div>
              <div class="dropdown-option" data-value="style-2" data-i18n="H2Dropdown.options.style2"></div>
              <div class="dropdown-option" data-value="style-3" data-i18n="H2Dropdown.options.style3"></div>
              <div class="dropdown-option" data-value="style-4" data-i18n="H2Dropdown.options.style4"></div>
              <div class="dropdown-option" data-value="style-5" data-i18n="H2Dropdown.options.style5"></div>
            </div>
          </div>

          <!-- é¢œè‰²é€‰æ‹©å™¨ -->
          <div class="color-HEX-picker">
            <input type="text" id="colorHEXInput" value="#cccccc" placeholder="color">
          </div>
          <!-- é¢œè‰²é€‰æ‹©å™¨ -->
          <div class="color-picker">
            <input type="color" id="colorInput" value="#cccccc" placeholder="color">
          </div>
        </div>

      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title5"></span>

        <div class="progress-container" id="progress2"></div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title6"></span>

        <div class="progress-container" id="progress1"></div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title7"></span>
        <div class="btn-box">
          <button id="locationStorage" class="confirm" data-i18n="btns.storage"></button>
          <button id="clearLocalStorage" class="cancel" data-i18n="btns.clear"></button>
        </div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title8"></span>
        <div class="btn-box">
          <button id="printPDF" class="confirm" data-i18n="btns.print"></button>
          <button id="exportImg" class="confirm" data-i18n="btns.exportImg"></button>
        </div>
      </div>

      <div class="operation-item">
        <span data-i18n="operationOptionsTitle.title9"></span>
        <div class="btn-box">
          <button id="exportText" class="confirm" data-i18n="btns.exportText"></button>
          <button id="importText" class="confirm" data-i18n="btns.importText"></button>
        </div>
      </div>

    </div>

    <div class="collapse-panel">
      <span>ğŸ‘ˆ&nbsp;&nbsp;</span>
      <span data-i18n="btns.collapsePanel"></span>
      <span>ğŸ‘ˆ</span>
    </div>

    <div class="ReimuHakurei">
      <img src="./img/aside.png" alt="">
    </div>
  </div>

  <div class="right-container">
    <!-- ç®€å†ç›’å­ -->
    <div id="resumeBox"></div>
  </div>

  <!-- äºŒæ¬¡ç¡®è®¤å¼¹çª— -->
  <div class="overlay" id="confirmationOverlay">
    <div class="confirm-dialog">
      <p data-i18n="clearDialog.description"></p>
      <div class="btn-box">
        <button class="cancel" id="cancelClear" data-i18n="clearDialog.cancel"></button>
        <button id="confirmClear" data-i18n="clearDialog.confirm"></button>
      </div>
    </div>
  </div>

</body>

</html>

<!-- å¼•å…¥ html2canvas åº“ -->
<script src="./js/quill.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script type="module" src="./js/i18n.js"></script>
<script type="module" src="./js/index.js"></script>
<script>
  // ç§»åŠ¨ section æ¨¡æ¿
  function moveSection(button, direction) {
    // è·å–å½“å‰æŒ‰é’®çš„çˆ¶å…ƒç´ ï¼ˆå³sectionï¼‰
    const currentSection = button.closest('.section');

    // è·å–æ‰€æœ‰çš„sectionå…ƒç´ 
    const allSections = Array.from(document.querySelectorAll('.section'));

    // è·å–å½“å‰sectionçš„ä½ç½®
    const currentIndex = allSections.indexOf(currentSection);

    // å¦‚æœæ–¹å‘æ˜¯å‘ä¸Š
    if (direction === 'up' && currentIndex > 0) {
      // è·å–ä¸Šä¸€ä¸ªsection
      const prevSection = allSections[currentIndex - 1];

      // æ·»åŠ ç§»åŠ¨åŠ¨ç”»
      currentSection.style.transition = 'transform 0.3s ease';
      prevSection.style.transition = 'transform 0.3s ease';

      let currentSectionHeight = currentSection.clientHeight;
      let prevSectionHeight = prevSection.clientHeight;

      // è®©å½“å‰sectionå’Œä¸Šä¸€ä¸ªsectionç§»åŠ¨
      currentSection.style.transform = `translateY(-${prevSectionHeight}px)`;
      prevSection.style.transform = `translateY(${currentSectionHeight}px)`;

      // ä½¿ç”¨setTimeoutç¡®ä¿åŠ¨ç”»å®Œæˆåäº¤æ¢ä½ç½®
      setTimeout(() => {
        currentSection.style.transition = '';
        prevSection.style.transition = '';
        currentSection.style.transform = '';
        prevSection.style.transform = '';

        // äº¤æ¢ä½ç½®
        currentSection.parentNode.insertBefore(currentSection, prevSection);
      }, 300); // ç­‰å¾…300msï¼Œç¡®ä¿åŠ¨ç”»å®Œæˆ
    }

    // å¦‚æœæ–¹å‘æ˜¯å‘ä¸‹
    if (direction === 'down' && currentIndex < allSections.length - 1) {
      // è·å–ä¸‹ä¸€ä¸ªsection
      const nextSection = allSections[currentIndex + 1];

      // æ·»åŠ ç§»åŠ¨åŠ¨ç”»
      currentSection.style.transition = 'transform 0.3s ease';
      nextSection.style.transition = 'transform 0.3s ease';

      let currentSectionHeight = currentSection.clientHeight;
      let nextSectionHeight = nextSection.clientHeight;

      // è®©å½“å‰sectionå’Œä¸‹ä¸€ä¸ªsectionç§»åŠ¨
      currentSection.style.transform = `translateY(${nextSectionHeight}px)`;
      nextSection.style.transform = `translateY(-${currentSectionHeight}px)`;

      // ä½¿ç”¨setTimeoutç¡®ä¿åŠ¨ç”»å®Œæˆåäº¤æ¢ä½ç½®
      setTimeout(() => {
        currentSection.style.transition = '';
        nextSection.style.transition = '';
        currentSection.style.transform = '';
        nextSection.style.transform = '';

        // äº¤æ¢ä½ç½®
        currentSection.parentNode.insertBefore(nextSection, currentSection);
      }, 300); // ç­‰å¾…300msï¼Œç¡®ä¿åŠ¨ç”»å®Œæˆ
    }
  }


  document.getElementById('exportImg').addEventListener('click', function () {
    // è·å–è¦å¯¼å‡ºçš„å…ƒç´ 
    const element = document.getElementById('resumeBox');

    // ä½¿ç”¨ html2canvas æ¸²æŸ“ä¸ºå›¾ç‰‡ï¼ˆä½¿ç”¨å›è°ƒæ–¹å¼ï¼‰
    html2canvas(element, {
      onrendered: function (canvas) {
        // åˆ›å»ºä¸€ä¸ªå›¾ç‰‡é“¾æ¥
        const imgData = canvas.toDataURL('image/png');

        // åˆ›å»ºä¸€ä¸ªä¸‹è½½é“¾æ¥
        const link = document.createElement('a');
        link.href = imgData;
        link.download = 'resume.png';  // è®¾ç½®æ–‡ä»¶å
        link.click();  // æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½
      }
    });
  });

  // åˆ é™¤ section æ¨¡æ¿
  function removeSection(deleteBtn) {
    const section = deleteBtn.closest(".section");
    section.remove();
  }
</script>